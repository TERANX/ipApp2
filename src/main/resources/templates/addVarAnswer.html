<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>

        let options = [];

        function addOption() {
            const optionInput = document.createElement('input');
            optionInput.type = 'text';
            optionInput.className = 'option-input';

            const optionsContainer = document.getElementById('options-container');
            optionsContainer.appendChild(optionInput);

            options.push(optionInput);
        }

        function saveTask() {
            const taskText = document.getElementById('task-text').value;

            const data = {
                taskText,
                options: options.map(option => option.value)
            };

            fetch('/save-task', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            })
                .then(response => {
                    if (response.ok) {
                        console.log("Задача сохранена успешно!");
                        // Очистить поля ввода и список вариантов ответов
                        document.getElementById('task-text').value = '';
                        document.getElementById('options-container').innerHTML = '';
                        options = [];
                    } else {
                        console.error("Ошибка при сохранении задачи");
                    }
                })
                .catch(error => {
                    console.error("Ошибка при отправке данных на сервер", error);
                });
        }
    </script>
</head>
<body>



<div class="mb-3">
    <label for="option" class="form-label">Answer Variants:</label>
    <div id="option" >
        <div class="option form-group"   >
            <!--добавляется только в таблицу task опшенсы не создаются. корректность не отмечается. нет выборки localnum-->
            <input type="text" class="form-control" th:name="option[0]" required>
            <div class="form-check mt-2">
                <label for="checkboxAnot" class="form-label">If it's correct answer</label>
                <input id="checkboxAnot" type="checkbox" class="form-check-input" th:name="corOpt[0]">
            </div>
        </div>
    </div>
</div>

<button type="button" id="addOption" class="btn btn-primary">Add Answer</button>
<br><br>

</body>
</html>